@use "sass:color";
// Dark theme colors
$bg-primary: #1a1a1a;
$bg-secondary: #2d2d2d;
$bg-tertiary: #3d3d3d;
$text-primary: #ffffff;
$text-secondary: #b0b0b0;
$text-muted: #808080;
$border-color: #4a4a4a;
$accent-gray: #a7a7a7;
$accent-green: #4caf50;
$accent-orange: #ff9800;
$accent-red: #f44336;

.door-system-toggle {
	position: fixed;
	top: 20px;
	left: 50%;
	transform: translateX(-50%);
	z-index: 1000;

	.toggle-button {
		background: linear-gradient(
			135deg,
			$bg-secondary 0%,
			color.adjust($bg-secondary, $lightness: 5%) 100%
		);
		border: 1px solid $border-color;
		color: $text-primary;
		padding: 12px 24px;
		border-radius: 10px;
		font-size: 14px;
		font-weight: 600;
		cursor: pointer;
		transition: all 0.3s ease;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
		letter-spacing: -0.2px;

		&:hover {
			background: linear-gradient(
				135deg,
				$bg-tertiary 0%,
				color.adjust($bg-tertiary, $lightness: 5%) 100%
			);
			border-color: $accent-gray;
			transform: translateY(-2px);
			box-shadow: 0 6px 24px rgba(0, 0, 0, 0.3);
		}
	}
}

.door-system-menu {
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	width: 70vw;
	height: 65vh;
	background: linear-gradient(
		135deg,
		$bg-primary 0%,
		color.adjust($bg-primary, $lightness: 2%) 100%
	);
	border: 1px solid $border-color;
	border-radius: 16px;
	box-shadow: 0 12px 48px rgba(0, 0, 0, 0.8);
	overflow: hidden;
	z-index: 1000;
	font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
	display: flex;
	flex-direction: column;

	.menu-header {
		background: linear-gradient(
			135deg,
			$bg-secondary 0%,
			color.adjust($bg-secondary, $lightness: 3%) 100%
		);
		padding: 24px 32px;
		border-bottom: 1px solid $border-color;
		position: relative;
		display: flex;
		justify-content: center;
		align-items: center;

		h2 {
			margin: 0;
			color: $text-primary;
			font-size: 24px;
			font-weight: 600;
			letter-spacing: -0.5px;
		}

		.close-button {
			position: absolute;
			top: 50%;
			right: 32px;
			transform: translateY(-50%);
			background: rgba($bg-tertiary, 0.8);
			border: 1px solid $border-color;
			border-radius: 8px;
			color: $text-secondary;
			font-size: 16px;
			width: 36px;
			height: 36px;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
			transition: all 0.3s ease;

			&:hover {
				color: $text-primary;
				background: $bg-tertiary;
				border-color: $accent-gray;
			}
		}
	}

	.menu-content {
		display: flex;
		flex: 1;
		overflow: hidden;
	}

	.sidebar {
		width: 280px;
		background: $bg-secondary;
		border-right: 1px solid $border-color;
		display: flex;
		flex-direction: column;

		.nav-section {
			padding: 24px 20px 16px;

			.section-title {
				color: $text-secondary;
				font-size: 11px;
				font-weight: 700;
				text-transform: uppercase;
				letter-spacing: 1px;
				margin-bottom: 16px;
				padding: 0 12px;
			}

			.nav-items {
				display: flex;
				flex-direction: column;
				gap: 4px;

				.nav-item {
					display: flex;
					align-items: center;
					gap: 12px;
					padding: 12px 16px;
					border-radius: 8px;
					color: $text-secondary;
					font-size: 14px;
					font-weight: 500;
					cursor: pointer;
					transition: all 0.3s ease;
					border: 1px solid transparent;

					.nav-icon {
						font-size: 20px;
						width: 20px;
						text-align: center;
						color: $accent-gray;
					}

					&:hover {
						background: rgba($bg-tertiary, 0.6);
						color: $text-primary;
					}

					&.active {
						background: rgba($accent-gray, 0.15);
						color: $accent-gray;
						border-color: rgba($accent-gray, 0.3);
						font-weight: 600;

						.nav-icon {
							color: $accent-gray;
						}
					}
				}
			}
		}

		.search-filter-section {
			padding: 0 20px 24px;
			border-bottom: 1px solid $border-color;

			.search-box {
				position: relative;
				margin-bottom: 16px;

				.search-icon {
					position: absolute;
					left: 12px;
					top: 50%;
					transform: translateY(-50%);
					color: $text-muted;
					font-size: 14px;
				}

				input {
					width: 200px;
					padding: 12px 12px 12px 36px;
					background: rgba($bg-primary, 0.5);
					border: 1px solid $border-color;
					border-radius: 8px;
					color: $text-primary;
					font-size: 14px;
					transition: all 0.3s ease;

					&::placeholder {
						color: $text-muted;
					}

					&:focus {
						outline: none;
						border-color: $accent-gray;
						background: rgba($bg-primary, 0.8);
					}
				}
			}

			.filter-options {
				display: flex;
				flex-direction: column;
				gap: 8px;

				.filter-title {
					color: $text-secondary;
					font-size: 12px;
					font-weight: 600;
					margin-bottom: 4px;
				}

				.filter-group {
					display: flex;
					flex-wrap: wrap;
					gap: 8px;

					.filter-tag {
						padding: 4px 8px;
						background: rgba($bg-tertiary, 0.6);
						border: 1px solid $border-color;
						border-radius: 6px;
						font-size: 11px;
						color: $text-secondary;
						cursor: pointer;
						transition: all 0.2s ease;

						&:hover {
							background: rgba($bg-tertiary, 0.8);
							color: $text-primary;
						}

						&.active {
							background: rgba($accent-gray, 0.2);
							border-color: $accent-gray;
							color: $accent-gray;
						}
					}
				}
			}
		}
	}

	.main-content {
		flex: 1;
		overflow: hidden;
		display: flex;
		flex-direction: column;
	}

	.door-list-view {
		padding: 24px;
		flex: 1;
		overflow-y: auto;
		display: flex;
		flex-direction: column;
		gap: 20px;

		.view-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			background: $bg-secondary;
			padding: 20px 24px;
			border-radius: 12px;
			border: 1px solid $border-color;

			h3 {
				margin: 0;
				color: $text-primary;
				font-size: 18px;
				font-weight: 600;
			}

			.add-button {
				background: linear-gradient(
					135deg,
					$accent-green 0%,
					color.adjust($accent-green, $lightness: 5%) 100%
				);
				border: none;
				color: white;
				padding: 10px 20px;
				border-radius: 8px;
				font-size: 14px;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s ease;
				box-shadow: 0 2px 8px rgba($accent-green, 0.3);

				&:hover {
					transform: translateY(-2px);
					box-shadow: 0 4px 16px rgba($accent-green, 0.4);
				}
			}
		}

		.door-list {
			background: $bg-secondary;
			border-radius: 12px;
			border: 1px solid $border-color;
			padding: 20px;
			display: grid;
			gap: 12px;

			.door-item {
				display: flex;
				align-items: center;
				background: $bg-tertiary;
				border: 1px solid color.adjust($border-color, $lightness: 5%);
				border-radius: 10px;
				padding: 18px 20px;
				cursor: pointer;
				transition: all 0.3s ease;
				position: relative;
				overflow: hidden;

				&::before {
					content: "";
					position: absolute;
					left: 0;
					top: 0;
					height: 100%;
					width: 4px;
					background: transparent;
					transition: all 0.3s ease;
				}

				&:hover {
					background: color.adjust($bg-tertiary, $lightness: 3%);
					border-color: $accent-gray;
					transform: translateY(-2px);
					box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);

					&::before {
						background: $accent-gray;
					}
				}

				.door-icon {
					font-size: 28px;
					margin-right: 20px;
					min-width: 40px;
					text-align: center;
					display: flex;
					align-items: center;
					justify-content: center;
					background: rgba($bg-primary, 0.5);
					border-radius: 8px;
					height: 50px;
					width: 50px;
				}

				.door-info {
					flex: 1;
					display: flex;
					flex-direction: column;
					gap: 6px;

					h4 {
						margin: 0;
						color: $text-primary;
						font-size: 16px;
						font-weight: 600;
						letter-spacing: -0.3px;
					}

					.door-details-row {
						display: flex;
						align-items: center;
						gap: 12px;
						flex-wrap: wrap;
					}

					.door-type {
						color: $text-secondary;
						font-size: 12px;
						text-transform: uppercase;
						font-weight: 600;
						letter-spacing: 0.5px;
						padding: 2px 8px;
						background: rgba($bg-primary, 0.6);
						border-radius: 4px;
					}

					.door-status {
						font-size: 12px;
						font-weight: 600;
						padding: 2px 8px;
						border-radius: 4px;
						text-transform: uppercase;
						letter-spacing: 0.3px;

						&.locked {
							color: white;
							background: rgba($accent-red, 0.8);
						}

						&.unlocked {
							color: white;
							background: rgba($accent-green, 0.8);
						}
					}

					.door-position {
						color: $text-muted;
						font-size: 11px;
						font-family: "Consolas", "Monaco", monospace;
					}
				}

				.door-position {
					color: $text-muted;
					font-size: 11px;
					text-align: right;
				}
			}
		}
	}

	.door-detail-view,
	.add-door-view {
		padding: 32px;
		max-height: calc(85vh - 120px);
		overflow-y: auto;
		display: grid;
		gap: 24px;

		.detail-header {
			display: flex;
			align-items: center;
			gap: 16px;
			background: $bg-secondary;
			padding: 20px 24px;
			border-radius: 12px;
			border: 1px solid $border-color;

			.back-button {
				background: rgba($bg-tertiary, 0.8);
				border: 1px solid $border-color;
				color: $text-secondary;
				padding: 10px 16px;
				border-radius: 8px;
				font-size: 16px;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.3s ease;
				display: flex;
				align-items: center;
				gap: 8px;

				&:hover {
					background: $bg-tertiary;
					color: $text-primary;
					border-color: $accent-gray;
					transform: translateY(-2px);
				}
			}

			h3 {
				margin: 0;
				color: $text-primary;
				font-size: 16px;
				font-weight: 500;
			}
		}

		.door-details {
			background: $bg-secondary;
			border-radius: 12px;
			border: 1px solid $border-color;
			padding: 24px;

			.detail-section {
				margin-bottom: 32px;

				&:last-child {
					margin-bottom: 0;
				}

				.door-title {
					display: flex;
					align-items: center;
					gap: 16px;
					margin-bottom: 24px;
					padding-bottom: 16px;
					border-bottom: 1px solid
						color.adjust($border-color, $lightness: 5%);

					.door-icon {
						font-size: 36px;
						background: rgba($bg-primary, 0.5);
						border-radius: 10px;
						padding: 12px;
						display: flex;
						align-items: center;
						justify-content: center;
					}

					h2 {
						margin: 0;
						color: $text-primary;
						font-size: 24px;
						font-weight: 600;
						letter-spacing: -0.5px;
					}
				}

				.detail-grid {
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
					gap: 20px;
					margin-bottom: 24px;

					.detail-item {
						background: rgba($bg-primary, 0.3);
						border-radius: 8px;
						padding: 16px;
						display: flex;
						flex-direction: column;
						gap: 8px;
						border: 1px solid rgba($border-color, 0.5);

						label {
							color: $text-secondary;
							font-size: 12px;
							font-weight: 600;
							text-transform: uppercase;
							letter-spacing: 0.8px;
						}

						span {
							color: $text-primary;
							font-size: 14px;
							font-weight: 500;

							&.door-type-badge {
								display: inline-block;
								padding: 4px 8px;
								border-radius: 4px;
								color: white;
								font-size: 11px;
								text-transform: capitalize;
							}

							&.status-badge {
								font-size: 12px;

								&.locked {
									color: $accent-red;
								}

								&.unlocked {
									color: $accent-green;
								}
							}
						}
					}
				}

				.position-section {
					label {
						display: block;
						color: $text-secondary;
						font-size: 12px;
						font-weight: 500;
						text-transform: uppercase;
						letter-spacing: 0.5px;
						margin-bottom: 8px;
					}

					.position-grid {
						display: grid;
						grid-template-columns: 1fr 1fr 1fr;
						gap: 12px;

						.coord-item {
							background: $bg-secondary;
							border: 1px solid $border-color;
							border-radius: 6px;
							padding: 12px;
							text-align: center;

							label {
								color: $text-muted;
								font-size: 10px;
								margin: 0 0 4px 0;
							}

							span {
								color: $text-primary;
								font-size: 13px;
								font-weight: 500;
								font-family: "Courier New", monospace;
							}
						}
					}
				}
			}

			.action-buttons {
				display: flex;
				gap: 12px;

				.action-button {
					display: flex;
					gap: 8px;
					flex: 1;
					padding: 12px 16px;
					justify-content: center;
					align-items: center;
					border: none;
					border-radius: 6px;
					font-size: 13px;
					font-weight: 500;
					cursor: pointer;
					transition: all 0.2s ease;

					&.teleport-button {
						background: $accent-orange;
						color: white;

						&:hover {
							background: color.adjust(
								$accent-orange,
								$lightness: -10%
							);
						}
					}

					&.delete-button {
						background: $accent-red;
						color: white;

						&:hover {
							background: color.adjust(
								$accent-red,
								$lightness: -10%
							);
						}
					}
				}
			}
		}
	}

	.add-door-form {
		background: $bg-secondary;
		border-radius: 12px;
		border: 1px solid $border-color;
		padding: 24px;

		.form-section {
			margin-bottom: 28px;

			&:last-child {
				margin-bottom: 0;
			}

			label {
				display: block;
				color: $text-primary;
				font-size: 14px;
				font-weight: 600;
				margin-bottom: 12px;
				letter-spacing: -0.2px;
			}

			.door-type-selector {
				display: grid;
				grid-template-columns: repeat(3, 1fr);
				gap: 16px;

				.type-option {
					display: flex;
					flex-direction: column;
					align-items: center;
					gap: 12px;
					background: rgba($bg-tertiary, 0.5);
					border: 2px solid $border-color;
					border-radius: 12px;
					padding: 20px 16px;
					cursor: pointer;
					transition: all 0.3s ease;
					position: relative;
					overflow: hidden;

					&::before {
						content: "";
						position: absolute;
						top: 0;
						left: 0;
						right: 0;
						height: 4px;
						background: transparent;
						transition: all 0.3s ease;
					}

					&:hover {
						background: rgba($bg-tertiary, 0.8);
						border-color: color.adjust(
							$border-color,
							$lightness: 10%
						);
						transform: translateY(-2px);
					}

					&.selected {
						border-color: $accent-gray;
						background: rgba($accent-gray, 0.1);

						&::before {
							background: $accent-gray;
						}
					}
					.type-icon {
						font-size: 24px;
					}

					.type-name {
						color: $text-primary;
						font-size: 12px;
						font-weight: 500;
						text-transform: capitalize;
					}
				}
			}

			.form-input {
				width: 100%;
				padding: 12px 16px;
				background: rgba($bg-primary, 0.5);
				border: 1px solid $border-color;
				border-radius: 8px;
				color: $text-primary;
				font-size: 14px;
				font-family: inherit;
				transition: all 0.3s ease;

				&::placeholder {
					color: $text-muted;
					font-style: italic;
				}

				&:focus {
					outline: none;
					border-color: $accent-gray;
					background: rgba($bg-primary, 0.8);
					box-shadow: 0 0 0 2px rgba($accent-gray, 0.2);
				}

				&.distance-input {
					width: 120px;
					text-align: center;
				}
			}

			.distance-input-group {
				display: flex;
				align-items: center;
				gap: 12px;

				.distance-unit {
					color: $text-secondary;
					font-size: 14px;
					font-weight: 500;
					min-width: 50px;
				}
			}

			.form-help {
				margin: 8px 0 0 0;
				color: $text-muted;
				font-size: 12px;
				line-height: 1.4;
				padding: 8px 12px;
				background: rgba($bg-primary, 0.2);
				border-radius: 6px;
				border-left: 3px solid rgba($accent-gray, 0.5);
			}

			.selection-options {
				display: flex;
				flex-direction: column;
				gap: 12px;
				margin-bottom: 16px;

				.selection-button {
					padding: 12px 20px;
					background: linear-gradient(
						135deg,
						$accent-gray 0%,
						color.adjust($accent-gray, $lightness: 5%) 100%
					);
					border: none;
					border-radius: 8px;
					color: white;
					font-size: 14px;
					font-weight: 600;
					cursor: pointer;
					transition: all 0.3s ease;
					display: flex;
					align-items: center;
					justify-content: center;
					gap: 8px;

					&:hover {
						transform: translateY(-2px);
						box-shadow: 0 6px 20px rgba($accent-gray, 0.4);
					}

					&:disabled {
						background: $bg-tertiary;
						color: $text-muted;
						cursor: not-allowed;
						transform: none;
						box-shadow: none;
					}

					&.selecting {
						animation: pulse 1.5s infinite;
					}
				}
			}

			.selection-help {
				color: $text-secondary;
				font-size: 12px;
				line-height: 1.4;
				margin: 0;
				padding: 12px;
				background: rgba($bg-primary, 0.3);
				border-radius: 6px;
				border-left: 3px solid $accent-gray;
			}

			.selection-info {
				color: $text-secondary;
				font-size: 13px;
				margin: 0;
				padding: 12px 16px;
				background: $bg-secondary;
				border-radius: 6px;
				border-left: 3px solid $accent-orange;
			}
		}

		.selection-actions {
			.select-button {
				width: 100%;
				background: $accent-gray;
				border: none;
				color: white;
				padding: 16px;
				border-radius: 8px;
				font-size: 14px;
				font-weight: 500;
				cursor: pointer;
				transition: all 0.2s ease;

				&:hover:not(:disabled) {
					background: color.adjust($accent-gray, $lightness: -10%);
				}

				&:disabled {
					background: $bg-tertiary;
					color: $text-muted;
					cursor: not-allowed;
				}

				&.selecting {
					animation: pulse 1.5s infinite;
				}
			}
		}
	}

	// Scrollbar styling
	::-webkit-scrollbar {
		width: 6px;
	}

	::-webkit-scrollbar-track {
		background: $bg-secondary;
	}

	::-webkit-scrollbar-thumb {
		background: $border-color;
		border-radius: 3px;

		&:hover {
			background: $text-muted;
		}
	}
}

// Animations
@keyframes pulse {
	0% {
		opacity: 1;
	}
	50% {
		opacity: 0.7;
	}
	100% {
		opacity: 1;
	}
}

// Responsive design
@media (max-width: 500px) {
	.door-system-menu {
		width: calc(100vw - 40px);
		right: 20px;
		left: 20px;
	}
}
